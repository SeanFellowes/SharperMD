<Window x:Class="SharperMD.Views.FindReplaceDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Find and Replace"
        Height="180" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Background="{DynamicResource WindowBackgroundBrush}"
        Foreground="{DynamicResource WindowForegroundBrush}">

    <Window.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding CloseCommand}"/>
        <KeyBinding Key="Return" Command="{Binding FindNextCommand}"/>
        <KeyBinding Key="F3" Command="{Binding FindNextCommand}"/>
        <KeyBinding Key="F3" Modifiers="Shift" Command="{Binding FindPreviousCommand}"/>
    </Window.InputBindings>

    <Grid Margin="16,12,16,12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="60"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Find Row -->
        <TextBlock Grid.Row="0" Grid.Column="0"
                   Text="Find:"
                   VerticalAlignment="Center"
                   Margin="0,0,8,8"
                   Foreground="{DynamicResource WindowForegroundBrush}"/>
        <TextBox x:Name="FindTextBox"
                 Grid.Row="0" Grid.Column="1"
                 Margin="0,0,8,8"
                 Padding="6,4"
                 VerticalAlignment="Center"
                 TabIndex="0"
                 Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/>
        <Button Grid.Row="0" Grid.Column="2"
                Content="Find Next"
                Width="75" Height="28"
                Margin="0,0,4,8"
                Padding="8,2"
                FontSize="12"
                TabIndex="2"
                Command="{Binding FindNextCommand}"
                Style="{StaticResource PrimaryButtonStyle}"/>
        <Button Grid.Row="0" Grid.Column="3"
                Content="Find Prev"
                Width="75" Height="28"
                Margin="0,0,0,8"
                Padding="8,2"
                FontSize="12"
                TabIndex="3"
                Command="{Binding FindPreviousCommand}"
                Style="{StaticResource SecondaryButtonStyle}"/>

        <!-- Replace Row -->
        <TextBlock Grid.Row="1" Grid.Column="0"
                   Text="Replace:"
                   VerticalAlignment="Center"
                   Margin="0,0,8,8"
                   Foreground="{DynamicResource WindowForegroundBrush}"/>
        <TextBox x:Name="ReplaceTextBox"
                 Grid.Row="1" Grid.Column="1"
                 Margin="0,0,8,8"
                 Padding="6,4"
                 VerticalAlignment="Center"
                 TabIndex="1"
                 Text="{Binding ReplaceText, UpdateSourceTrigger=PropertyChanged}"/>
        <Button Grid.Row="1" Grid.Column="2"
                Content="Replace"
                Width="75" Height="28"
                Margin="0,0,4,8"
                Padding="8,2"
                FontSize="12"
                TabIndex="4"
                Command="{Binding ReplaceCommand}"
                Style="{StaticResource SecondaryButtonStyle}"/>
        <Button Grid.Row="1" Grid.Column="3"
                Content="Replace All"
                Width="75" Height="28"
                Margin="0,0,0,8"
                Padding="8,2"
                FontSize="12"
                TabIndex="5"
                Command="{Binding ReplaceAllCommand}"
                Style="{StaticResource SecondaryButtonStyle}"/>

        <!-- Options Row -->
        <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4"
                    Orientation="Horizontal"
                    Margin="0,4,0,8">
            <CheckBox Content="Match case"
                      IsChecked="{Binding MatchCase}"
                      Foreground="{DynamicResource WindowForegroundBrush}"
                      Margin="0,0,20,0"/>
            <CheckBox Content="Whole word"
                      IsChecked="{Binding WholeWord}"
                      Foreground="{DynamicResource WindowForegroundBrush}"
                      Margin="0,0,20,0"/>
            <CheckBox Content="Use regex"
                      IsChecked="{Binding UseRegex}"
                      Foreground="{DynamicResource WindowForegroundBrush}"/>
        </StackPanel>

        <!-- Status Row -->
        <TextBlock x:Name="StatusText"
                   Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="4"
                   Text="{Binding StatusMessage}"
                   Foreground="{DynamicResource WindowForegroundBrush}"
                   Opacity="0.7"
                   FontSize="11"/>
    </Grid>
</Window>
